# Approximating Pi using the Monte Carlo method

## Overview
This is a real-time web application that approximates Pi using the Monte Carlo method with streaming point generation leveraging SSE (efficient server->client real-time data flow without WebSocket complexity). It has the following components:
- **Backend** - Simple Python + Flask server: generates random coordinate batches (using NumPy for better efficiency and speed, considering we need to generate large arrays for a more accurate approximation) and streams them via SSE to support real-time updates.
- **Frontend** - Simple Svelte + TypeScript client: receives the `N` requested points generated by the backend in real-time and approximates Pi while providing reactive UI updates.  

## Complete Flow
1. User enters number of points N in the frontend and clicks on "Start simulation"
2. Frontend sends POST request to the `/generatePoints` endpoint with `{num_points: N}`
3. Backend establishes SSE connection
4. Backend streams the generated coordinate batches via SSE events (`start`, `batch`, `end`)
5. Frontend receives each batch and 
   - Checks if the points fall inside a circle with radius = 1 (`x^2 + y^2 <= 1`)
   - Updates count of points inside/outside the circle
   - Approximates Pi (`4 * points_inside / total_points`)
6. UI updates approximation
7. Stream ends when all N points have been processed, or when the user clicks on "Stop"

## Quick Start

### Prerequisites
Docker

### Run the Application
After cloning the repository, run the following command in the root folder:
```bash
docker compose up
```
The application should be available at http://localhost:5173.

### Usage
1. Enter the number of N points to generate
2. Click "Start Simulation"
3. Watch the Pi approximation update in real-time as the batches stream in
4. Wait for it to end, or stop it by pressing the "Stop" button

### Run tests
With the `backend` container running, run:
```bash
docker compose exec backend pytest -v
```

## Sources
1. https://medium.com/version-1/sse-in-sveltekit-5c085b3b61d1
2. https://github.com/razshare/sveltekit-sse
3. https://dev.to/dumorando/how-to-setup-a-svelte-project-4kho
4. https://jenyus.web.app/blog/2021-05-30-setting-up-a-development-environment-for-sveltekit-with-docker-and-compose
5. https://maxhalford.github.io/blog/flask-sse-no-deps/
6. https://medium.com/@anirbanc88/python-random-module-vs-numpy-random-module-37bfa91a911d
6. https://www.digitalocean.com/community/tutorials/unit-test-in-flask
7. https://medium.com/pon-tech-talk/extend-the-usage-of-the-eventsource-api-with-microsoft-fetch-event-source-a5c83ff95964
8. https://www.reddit.com/r/educationalgifs/comments/dy84zb/approximating_pi_using_monte_carlo_simulation/
9. https://dlibin.net/posts/monte-carlo-simulation-javascript